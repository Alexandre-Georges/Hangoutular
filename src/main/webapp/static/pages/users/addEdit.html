<div ng-include src="'static/pages/header.html'"></div>
<div class="row-fluid">
	<div class="span10 offset1 mainView">
		<form name="addEditForm" class="form-horizontal">

			<fieldset>  
				<div ng-switch on="add">
					<legend ng-switch-when="true">Add a new user</legend>
					<legend ng-switch-when="false">Edit a user {{user.id}}</legend>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputLastname.$invalid}">
					<label class="control-label" for="inputLastname">Lastname</label>
					<div class="controls">
						<input type="text" name="inputLastname" ng-model="user.lastname" ng-required="true" ng-maxlength="75" class="input-custom" placeholder="Lastname" />
						<span ng-show="addEditForm.inputLastname.$error.required" class="help-inline">Field required</span>
						<span ng-show="addEditForm.inputLastname.$error.maxlength" class="help-inline">This field has a size of 75 characters maximum</span>
					</div>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputFirstname.$invalid}">
					<label class="control-label" for="inputFirstname">Firstname</label>
					<div class="controls">
						<input type="text" name="inputFirstname" ng-model="user.firstname" ng-required="true" ng-maxlength="75" class="input-custom" placeholder="Firstname" />
						<span ng-show="addEditForm.inputFirstname.$error.required" class="help-inline">Field required</span>
						<span ng-show="addEditForm.inputFirstname.$error.maxlength" class="help-inline">This field has a size of 75 characters maximum</span>
					</div>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputEmail.$invalid}">
					<label class="control-label" for="inputEmail">Email</label>
					<div class="controls">
						<input type="email" name="inputEmail" ng-model="user.email" ng-required="true" ng-maxlength="200" class="input-custom" placeholder="Email" />
						<span ng-show="addEditForm.inputEmail.$error.required" class="help-inline">Field required</span>
						<span ng-show="addEditForm.inputEmail.$error.maxlength" class="help-inline">This field has a size of 200 characters maximum</span>
						<span ng-show="addEditForm.inputEmail.$error.email" class="help-inline">Invalid format</span>
					</div>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputLogin.$invalid}">
					<label class="control-label" for="inputLogin">Login</label>
					<div class="controls">
						<input type="text" name="inputLogin" ng-model="user.login" ng-required="true" ng-maxlength="50" class="input-custom" placeholder="Login" />
						<span ng-show="addEditForm.inputLogin.$error.required" class="help-inline">Field required</span>
						<span ng-show="addEditForm.inputLogin.$error.maxlength" class="help-inline">This field has a size of 50 characters maximum</span>
					</div>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputLeavingDate.$invalid}">
					<label class="control-label" for="inputLeavingDate">Leaving date</label>
					<div class="controls">
						<input type="text" name="inputLeavingDate" ng-model="user.leavingDate" bs-datepicker class="input-custom" placeholder="Leaving date" />
						<i class="icon-calendar icon-in-the-field"></i>
						<span ng-show="addEditForm.inputLeavingDate.$error.date" class="help-inline">Field format is : dd/mm/yyyy</span>
					</div>
				</div>
				<div class="control-group" ng-class="{error: addEditForm.inputRights.$invalid}">
					<label class="control-label" for="inputRights">Rights</label>
					<div class="controls">
						<table class="doubleSelect">
							<thead>
								<td>Assigned rights</td>
								<td></td>
								<td>Unassigned rights</td>
							</thead>
							<tr>
								<td>
									<select name="inputRights" ng-model="assignedRightId" ng-options="r.id as r.label for r in assignedRights" ng-click="unassignRight()" class="input-custom" multiple="multiple" size="10" />
								</td>
								<td>
									<i class="icon-arrow-left"></i><br />
									<i class="icon-arrow-right"></i>
								</td>
								<td>
									<select name="inputRights" ng-model="unassignedRightId" ng-options="r.id as r.label for r in unassignedRights" ng-click="assignRight()" class="input-custom" multiple="multiple" size="10" />
								</td>
							</tr>
						</table>
					</div>
				</div>
		
				<div class="row-fluid">
					<div class="span4 offset2">
						<button type="submit" ng-disabled="addEditForm.$invalid" ng-click="save()" class="btn btn-primary">Save</button>
						<a ng-href="#{{UrlUtils.getPreviousLocation()}}" class="btn">Cancel</a>
					</div>
				</div>
			</fieldset>
		</form>
	</div>
</div>